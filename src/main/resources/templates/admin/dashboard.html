<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>admin</title>
</head>
<body>
관리자 페이지입니다.<br/><br/><br/>
	<span th:if="${user}" th:text="|${user.autho}-${user.nickname} 관리자님 환영합니다.|">아이디 존재</span><br/>
	<span th:unless="${user}">아이디 비존재</span><br/>
	
 <h1>User List</h1>
    <table>
        <thead>
            <tr>
                <th>회원번호</th>
                <th>회원 아이디</th>
                <th>회원 닉네임</th>
                <th>회원 이메일</th>
                <th>가입날짜</th>
            </tr>
        </thead>
        <tbody>
            <!-- 유저 리스트 반복 -->
            <tr th:each="user : ${users}">
                <td th:text="${user.id}">회원번호</td>
                <td th:text="${user.username}">회원 아이디</td>
                <td th:text="${user.nickname}">회원 닉네임</td>
                <td th:text="${user.email}">회원 이메일</td>
                <td th:text="${#dates.format(user.createdDate, 'yyyy-MM-dd HH:mm:ss')}">가입날짜</td>
            	<td>
                <form th:if="${user.id gt 100} "th:action="@{/admin/delete_user}" method="post">
                    <input type="hidden" th:name="id" th:value="${user.id}">
                    <button type="submit">Delete</button>
                </form>
            </td>
            </tr>
        </tbody>
    </table>
    
    <h1>Admin Community List</h1>
    <table>
        <thead>
            <tr>
                <th>글번호</th>
                <th>분류</th>
                <th>제목</th>
                <th>작성자</th>
                <th>작성날짜</th>
                <th>게시글페이지로 이동</th>
                <th>글삭제</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="community : ${communities}">
                <td th:text="${community.id}"></td>
                <td th:text="${community.category}"></td>
                <td>
                 <a th:href="@{|/talk.yalolza.gg/community/detail/${community.id}|}" th:if="${#strings.length(community.title) <= 15}" th:text="${community.title}"></a>
                 <a th:href="@{|/talk.yalolza.gg/community/detail/${community.id}|}" th:if="${#strings.length(community.title) > 15}" th:text="${community.title.substring(0, 15)} + '...'"></a>
               </td>
                <td th:text="${community.siteUser.nickname}"></td>
                <td th:text="${#temporals.format(community.createDate, 'yyyy-MM-dd')}"></td>
                <td>
        		<!-- 게시글 클릭 링크 - 새 창으로 열기 -->
        			<a th:href="@{/talk.yalolza.gg/community/detail/{id}(id=${community.id})}" target="_blank">새창으로 이동하기</a>
    			</td>
                <td>
                    <form th:action="@{/admin/delete_community}" method="post">
                        <input type="hidden" name="id" th:value="${community.id}">
                        <button type="submit">글삭제</button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
    
    <h1>Admin Comment List</h1>
    <table>
        <thead>
            <tr>
                <th>댓글번호</th>
                <th>댓글내용</th>
                <th>작성자</th>
                <th>작성날짜</th>
                <th>댓글페이지로 이동</th>
                <th>댓글삭제</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="comment : ${comments}">
                <td th:text="${comment.id}"></td>
                 <td>
                 <a th:href="@{|/talk.yalolza.gg/community/detail/${comment.community.id}|}" th:if="${#strings.length(comment.content) <= 15}" th:text="${comment.content}"></a>
                 <a th:href="@{|/talk.yalolza.gg/community/detail/${comment.community.id}|}" th:if="${#strings.length(comment.content) > 15}" th:text="${comment.content.substring(0, 15)} + '...'"></a>
               </td>
                <td th:text="${comment.author.nickname}"></td>
                <td th:text="${#temporals.format(comment.createDate, 'yyyy-MM-dd')}"></td>
                <td>
        		<!-- 게시글 클릭 링크 - 새 창으로 열기 -->
        			<a th:href="@{/talk.yalolza.gg/community/detail/{id}(id=${comment.community.id})}" target="_blank">새창으로 이동하기</a>
    			</td>
                <td>
                    <form th:action="@{/admin/delete_comment}" method="post">
                        <input type="hidden" name="id" th:value="${comment.id}">
                        <button type="submit">댓글삭제</button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
	
	 <a th:href="@{/yalolza.gg/user/mypage}">mypage 로</a> <br/><br/>
	 <a th:href="@{/yalolza.gg}">메인 으로</a> <br/><br/>
	 
</body>
</html>